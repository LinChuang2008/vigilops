# VigilOps 客户使用指南

> 欢迎使用 VigilOps 运维监控平台！本指南将帮助您快速上手。

---

## 1. 登录平台

1. 打开浏览器，访问我们为您部署的平台地址（如 `http://your-server:3001`）
2. 输入我们提供的管理员账号和密码
3. 首次登录后，建议修改默认密码

> 💡 支持 Chrome、Firefox、Edge 等现代浏览器。

---

## 2. Dashboard 仪表盘

登录后默认进入 Dashboard 页面，这是您的运维全局视图：

- **健康评分**：系统整体健康度，实时计算
- **主机概览**：在线/离线主机数量
- **服务状态**：各服务运行状态汇总
- **告警统计**：当前活跃告警数量及趋势
- **资源趋势图**：CPU、内存、磁盘使用率趋势

Dashboard 通过 WebSocket 实时推送数据，无需手动刷新。

---

## 3. 查看主机状态和指标

### 主机列表

进入 **主机管理** 页面，可以看到所有被监控主机：

- 🟢 绿色 = 在线正常
- 🔴 红色 = 离线或异常
- 支持按名称、状态、分组搜索和筛选

### 主机详情

点击任一主机，进入详情页：

- **实时指标**：CPU 使用率、内存使用率、磁盘使用率、网络流量、系统负载
- **历史趋势**：支持 5 分钟、1 小时、1 天三种聚合粒度
- **服务列表**：该主机上运行的所有服务及状态
- **最近告警**：与该主机相关的告警记录

---

## 4. 配置告警规则

进入 **告警规则** 页面：

1. 点击 **新建规则**
2. 选择告警类型：
   - **指标告警**：CPU > 90%、内存 > 85%、磁盘 > 90% 等
   - **日志关键字告警**：日志中出现特定关键词（如 `ERROR`、`OOM`）
   - **数据库告警**：连接数过高、慢查询过多等
3. 设置阈值和持续时间（如 CPU > 90% 持续 5 分钟）
4. 选择告警级别：info / warning / critical
5. 保存规则

> 💡 我们已为您预配置了常用告警规则（CPU、内存、磁盘、主机离线），您可以根据业务需求调整。

---

## 5. 配置通知渠道

进入 **通知渠道** 页面，支持以下 5 种通知方式：

### 钉钉
1. 在钉钉群中添加自定义机器人，获取 Webhook URL
2. 如启用签名验证，记录签名密钥
3. 在平台填入 Webhook URL 和签名密钥

### 飞书
1. 在飞书群中添加自定义机器人，获取 Webhook URL
2. 记录签名密钥
3. 在平台填入相关信息

### 企业微信
1. 在企业微信群中添加群机器人，获取 Webhook URL
2. 在平台填入 Webhook URL

### 邮件
1. 准备 SMTP 服务器信息（地址、端口、账号、密码）
2. 支持 SSL/TLS 加密
3. 填入收件人邮箱

### Webhook
1. 提供您的接收端 URL
2. 平台会以 JSON 格式 POST 告警数据

> 💡 配置完成后，可点击 **测试** 按钮验证通知是否正常送达。

---

## 6. 使用 AI 分析功能

进入 **AI 分析** 页面，这是 VigilOps 的核心特色功能：

### AI 对话
- 用自然语言提问，例如：
  - "服务器最近有什么异常？"
  - "为什么 CPU 使用率这么高？"
  - "帮我分析一下最近的日志"
- AI 会结合当前系统指标、日志和告警数据给出专业分析

### 告警根因分析
- 在 **告警列表** 中，点击告警旁的 **AI 分析** 按钮
- AI 会自动关联告警前后 30 分钟的指标和日志
- 给出可能的根因分析和处理建议

### AI 洞察
- 系统每 30 分钟自动扫描日志，检测异常模式
- 洞察结果按严重级别（critical / warning / info）分类
- 可在 AI 分析页面查看所有洞察

### 系统概览
- AI 自动生成系统健康摘要
- 包含主机/服务/告警统计和资源使用趋势

---

## 7. 查看日志

进入 **日志** 页面：

### 日志搜索
- **全文搜索**：输入关键词搜索所有日志
- **筛选条件**：按日志级别（INFO/WARN/ERROR）、主机、服务、时间范围筛选
- **分页浏览**：支持大量日志的分页查看

### 实时日志流
- 点击 **实时模式** 开关
- 新产生的日志会实时滚动显示（WebSocket 推送）
- 适合排查正在发生的问题

### 日志统计
- 查看各级别日志的分布统计
- 快速了解系统整体日志状况

---

## 8. 使用服务拓扑图

进入 **服务拓扑** 页面：

- **可视化展示**：所有服务及其依赖关系以拓扑图形式呈现
- **交互操作**：
  - 拖拽节点调整布局
  - 点击节点查看服务详情
  - 鼠标悬停高亮相邻服务
- **布局保存**：调整好的布局自动保存，下次打开保持不变
- **AI 拓扑建议**：点击 **AI 推荐** 按钮，AI 会根据已有服务自动推断可能的依赖关系
- **多服务器视图**：支持跨服务器查看服务拓扑

---

## 9. 数据库监控（如已配置）

进入 **数据库** 页面：

- **连接数**：当前/活跃连接数
- **数据库大小**：存储空间使用情况
- **QPS**：每秒查询数
- **慢查询 Top 10**：最慢的查询语句排行
- **历史趋势**：各项指标的历史变化

支持 PostgreSQL、MySQL、Oracle（专业版）。

---

## 10. 运维报告

进入 **报告** 页面：

- **自动报告**：系统每天凌晨 2:00 生成日报，每周一凌晨 3:00 生成周报
- **手动生成**：点击 **生成报告** 按钮可立即生成
- **报告内容**：主机状态汇总、告警统计、资源使用趋势、AI 分析摘要

---

## 11. 常见问题 FAQ

### Q: 主机显示离线怎么办？
**A:** 检查该主机上的 VigilOps Agent 是否正常运行：
```bash
systemctl status vigilops-agent
```
如未运行，尝试重启：
```bash
systemctl restart vigilops-agent
```
如仍有问题，请联系我们。

### Q: 告警通知没收到？
**A:** 请检查：
1. 通知渠道是否配置正确（点击测试按钮验证）
2. 是否处于静默窗口时间段
3. 同一告警短时间内可能触发了冷却机制（避免告警风暴）

### Q: AI 分析没有返回结果？
**A:** AI 分析依赖后端 API 服务，请确认：
1. 网络连接正常
2. 如提示配额超限，请联系我们调整

### Q: 如何添加新的被监控主机？
**A:** 联系我们，我们会远程在新主机上安装 Agent 并完成配置（每台约 10 分钟）。

### Q: 数据会保留多久？
**A:** 默认配置：
- 监控指标：原始数据 7 天，聚合数据 90 天
- 日志：30 天
- 告警记录：永久保留
- 可根据需求调整

### Q: 能自己修改告警规则吗？
**A:** 可以。您有完全的平台管理权限，可以自行添加、修改、删除告警规则。如需帮助，随时联系我们。

---

## 12. 联系支持

遇到任何问题，请通过以下方式联系我们：

| 方式 | 详情 |
|------|------|
| 微信 | ___________________________ |
| 邮箱 | support@lchuang.net |
| 电话 | ___________________________ |
| 专属运维群 | （专业版客户） |

**响应时间：**
- 托管基础版：工作日（9:00-18:00）8 小时内响应
- 托管专业版：7×24 小时，2 小时内响应

---

*感谢您选择 VigilOps！如有任何建议或反馈，欢迎随时告知。*
